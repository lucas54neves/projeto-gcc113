module ps2_tx
(
	input wire clk, reset,
	input wire wr_ps2,
	input wire [7:0] din,
	inout wire ps2d, ps2c,
	output reg tx_idle, tx_done_tick
);

// symbolic state declaration
localparam [2:0]
	idle = 3'b000,
	rts = 3'b001,
	start = 3'b010,
	data = 3'b011,
	stop = 3'b100,

// signal declaration
reg [2:0] state_reg, state_next;
reg [7:0] filter_reg;
wire [7:0] filter_next;
reg f_ps